(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(40)},21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(15),u=t.n(c),o=(t(21),t(3)),s=t(2),l=t.n(s),i=t(4),m=t(5),f=t.n(m),d="/api/persons",p={getPersons:function(){var e=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(d);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPerson:function(){var e=Object(i.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(d,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updatePerson:function(){var e=Object(i.a)(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(d,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(i.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(d,"/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},h=function(e){var n=e.showPersons,t=e.deletePerson;return n.map((function(e){return a.a.createElement("div",{key:e.id,className:"person"},a.a.createElement("span",null,e.name)," \xa0",a.a.createElement("span",null,e.number)," \xa0",a.a.createElement("button",{onClick:function(){return t(e.id)}},"delete"))}))},b=function(e){var n=e.addName,t=e.newName,r=e.handleNewName,c=e.newNumber,u=e.handleNewNumber;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",{className:"personform"},"name: ",a.a.createElement("input",{value:t,onChange:r})),a.a.createElement("div",{className:"personform"},"number: ",a.a.createElement("input",{value:c,onChange:u})),a.a.createElement("div",{className:"personform"},a.a.createElement("button",{type:"submit"},"add")))},v=function(e){var n=e.filter,t=e.handlefilter;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:n,onChange:t}))},w=function(e){var n=e.errorMessage,t=e.successMessage;return null===n&&null===t?null:a.a.createElement("div",{className:"".concat(null===n?"error2":"error1")},a.a.createElement("p",null,null===n?t:n))},E=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(""),s=Object(o.a)(u,2),l=s[0],i=s[1],m=Object(r.useState)(""),f=Object(o.a)(m,2),d=f[0],E=f[1],N=Object(r.useState)(""),g=Object(o.a)(N,2),j=g[0],O=g[1],k=Object(r.useState)(null),P=Object(o.a)(k,2),y=P[0],x=P[1],T=Object(r.useState)(null),S=Object(o.a)(T,2),C=S[0],M=S[1];Object(r.useEffect)((function(){p.getPersons().then((function(e){c(e)})).catch((function(e){x("There was an error retrieving the phonebook from server, please try again later"),setTimeout((function(){x(null)}),5e3)}))}),[]);var A=j?t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())})):t;return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(w,{errorMessage:y,successMessage:C}),a.a.createElement(v,{filter:j,handlefilter:function(e){O(e.target.value)}}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(b,{addName:function(e){e.preventDefault();var n={name:l,number:d},r=t.find((function(e){return e.name===l}));r?window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))&&p.updatePerson(r.id,n).then((function(e){M("Updated ".concat(l)),setTimeout((function(){M(null)}),5e3),c(t.map((function(n){return n.name!==r.name?n:e})))})).catch((function(e){x("".concat(l," was already removed from server")),setTimeout((function(){x(null)}),5e3),c(t.filter((function(e){return e.id!==r.id})))})):p.createPerson(n).then((function(e){M("Added ".concat(e.name)),setTimeout((function(){M(null)}),5e3),c(t.concat(e))})).catch((function(e){x("There was an error adding ".concat(l," to the phonebook")),setTimeout((function(){x(null)}),5e3)})),i(""),E("")},newName:l,newNumber:d,handleNewName:function(e){i(e.target.value)},handleNewNumber:function(e){E(e.target.value)}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(h,{showPersons:A,deletePerson:function(e){var n=t.find((function(n){return e===n.id}));window.confirm("Delete ".concat(n.name,"?"))&&p.deletePerson(e).then((function(n){n&&c(t.filter((function(n){return e!==n.id})))})).catch((function(r){x("".concat(n.name," was already removed from server")),setTimeout((function(){x(null)}),5e3),c(t.filter((function(n){return n.id!==e})))}))}}))};u.a.render(a.a.createElement(E,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.1b5b85a5.chunk.js.map